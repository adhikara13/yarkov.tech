---
import { CollectionEntry, getCollection } from "astro:content";
import ArticleLayout from "@root/layouts/article.astro";

export async function getStaticPaths() {
	const articles = await getCollection("blog");
	return articles
		.filter((a) => !a.data.draft)
		.map((article) => ({
			params: { slug: `articles/${article.slug}` },
			props: { article },
		}));
}

type Props = { article: CollectionEntry<"blog"> };

const { Content } = await Astro.props.article.render();
---

<ArticleLayout article={Astro.props.article}>
	<Content />
</ArticleLayout>
