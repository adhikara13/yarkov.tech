---
import PageLayout from "@layouts/default.astro";
import ProjectsList from "@components/ProjectsList.astro";
import ProjectItem from "@components/ProjectItem.astro";
import PageHeading from "@components/PageHeading.astro";
import { getLanguageFromURL } from "@i18n/utils";
import { getCollection } from "astro:content";
// import { useTranslation } from "@i18n/utils";
// const t = useTranslation(Astro);
const lang = getLanguageFromURL(Astro.url.pathname);
const projects = (await getCollection("projects")).filter(
	(p) => !p.data.draft && p.id.split(".")[1] === lang
);
---

<PageLayout
	noIndex
	lang={lang}
	title={"Проекты"}
	description={"Несколько моих основных проектов которые были разработаны и выложены в открытый доступ."}
>
	<PageHeading
		heading={"Проекты"}
		description={"Несколько моих основных проектов которые были разработаны и выложены в открытый доступ."}
	/>
	<section>
		<ProjectsList>
			{projects.map((project) => <ProjectItem data={project.data} />)}
		</ProjectsList>
	</section>
</PageLayout>
